!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=3)}({3:function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function i(){i=function(t,e){return new o(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function o(t,n,r){var a=new RegExp(t,n);return e.set(a,r||e.get(t)),l(a,o.prototype)}function r(t,o){var n=e.get(o);return Object.keys(n).reduce((function(e,o){return e[o]=t[n[o]],e}),Object.create(null))}return c(o,RegExp),o.prototype.exec=function(e){var o=t.exec.call(this,e);return o&&(o.groups=r(o,this)),o},o.prototype[Symbol.replace]=function(o,a){if("string"==typeof a){var i=e.get(this);return t[Symbol.replace].call(this,o,a.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+i[e]})))}if("function"==typeof a){var c=this;return t[Symbol.replace].call(this,o,(function(){var t=arguments;return"object"!==n(t[t.length-1])&&(t=[].slice.call(t)).push(r(t,c)),a.apply(this,t)}))}return t[Symbol.replace].call(this,o,a)},i.apply(this,arguments)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(function(){var t;t=jQuery,"undefined"!=typeof tinymce&&null!==typeof tinymce.activeEditor&&tinymce.PluginManager.add("reoako",(function(e){e.ui.registry.addIcon("reoako-icon",'<svg style="height: 30px; width: 30px; margin-left: -8px; margin-top: -8px;"><path fill-rule="nonzero" d="M 7.783 9.605 C 7.783 8.606 8.592 7.797 9.591 7.797 L 27.673 7.797 C 28.672 7.797 29.481 8.606 29.481 9.605 L 29.481 24.974 C 29.481 25.973 28.672 26.782 27.673 26.782 L 21.069 26.782 L 19.166 28.977 C 18.882 29.305 18.383 29.305 18.097 28.977 L 16.195 26.782 L 9.591 26.782 C 8.592 26.782 7.783 25.973 7.783 24.974 L 7.783 9.605 Z " /><path fill="white" fill-rule="nonzero" d="M 17.126 21.858 L 14.981 21.858 L 14.981 12.016 L 18.984 12.016 C 21.291 12.016 22.618 13.274 22.618 15.236 C 22.618 16.579 21.981 17.553 20.827 18.035 L 22.98 21.858 L 20.612 21.858 L 18.692 18.37 L 17.126 18.37 L 17.126 21.858 Z" /><path fill-rule="nonzero" d=" M 17.126 13.72 L 17.126 16.7 L 18.58 16.7 C 19.811 16.7 20.414 16.209 20.414 15.228 C 20.414 14.254 19.811 13.72 18.571 13.72 L 17.126 13.72 Z" /></svg>'),e.on("click",(function(){var o,n=e.selection,r=t(n.getEnd());if("REOAKO"===(null==r||null===(o=r.context)||void 0===o?void 0:o.nodeName)){var a=r.closest("reoako");n.select(a.get(0))}})),e.ui.registry.addButton("reoako-button",{icon:"reoako-icon",tooltip:"Reoako translation dialog",stateSelector:"reoako",onAction:function(){!function(){var o,n,r,a,i;i="",n=e.selection,r=t(n.getEnd()),(a=r.closest("reoako")).length?(i=a.text(),a.children().length):n.isCollapsed()||(i=n.getContent({format:"text"}));var c=e.selection.getSel();"#text"===c.baseNode.nodeName&&(i=c.baseNode.data.substring(c.anchorOffset,c.extentOffset)),o="/reoako-modal/search?search_term="+i;var l=e.windowManager.openUrl({title:"Reoako Search",url:o,width:800,height:600,editor:e},{currentText:i});window._activeEditor=e,window._activeDialog=l}()}});var o=i(/(\[reoako )(data\x2Dreoako\x2Dheadword=("(.*?)")).((data\x2Dreoako\x2Did=("(.*?)")).)(data\x2Dreoako\x2Dtranslation=("(.*?)"))(\])/gi,{headword:4,id:8,translation:11}),n=i(/((<reoako ((class="(.*?)").*?(data\x2Dreoako\x2Dheadword="(.*?)").*?(data\x2Dreoako\x2Did="(.*?)").*?(data\x2Dreoako\x2Dtranslation="(.*?)").*?)>)(.*?)(<\/reoako>))/g,{headword:7,id:9,translation:11});e.on("KeyUp",(function(o,n){var r,a=n||window.event,i=a.keyCode||a.which,c=t(e.selection.getEnd()),l="REOAKO"===(null==c||null===(r=c.context)||void 0===r?void 0:r.nodeName);if(![38,40].includes(i)){if(l&&[37,39].includes(i)&&c!==c.closest("reoako")){var u,f=c.closest("reoako");if(e.selection.getRng().startOffset!==(null==c||null===(u=c.context)||void 0===u?void 0:u.innerText.length))return e.selection.select(f.get(0)),void a.preventDefault()}if(8===i&&l||46===i&&l)return e.execCommand("insertContent",!0," "),c.remove(),void a.preventDefault();[37,39].includes(i)||!l||a.preventDefault()}})),e.on("BeforeSetContent",(function(t){-1!==t.content.search(o)&&(t.content=function(t){return r(t.matchAll(o)).forEach((function(e){if("0"in e){var o,n,r=e[0],a=void 0;if(e.groups.headword&&(o=e.groups.headword),e.groups.id&&(n=e.groups.id),e.groups.translation&&(a=e.groups.translation),o&&n&&a){var i='<reoako class="reoako-tinymce" data-reoako-headword="'.concat(o,'" data-reoako-id="').concat(n,'" data-reoako-translation="').concat(a,'">').concat(a,"</reoako>");t=t.replace(r,i)}}})),t}(t.content))})),e.on("PostProcess",(function(t){var e;t.get&&(t.content=(r((e=t.content).matchAll(n)).forEach((function(t){if("0"in t){var o,n,r=t[0],a=void 0;if(t.groups.headword&&(o=t.groups.headword),t.groups.id&&(n=t.groups.id),t.groups.translation&&(a=t.groups.translation),o&&n&&a){var i='[reoako data-reoako-headword="'.concat(o,'" data-reoako-id="').concat(n,'" data-reoako-translation="').concat(a,'"]');e=e.replace(r,i)}}})),e))}))}))}).call(void 0)}});